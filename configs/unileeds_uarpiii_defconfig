# Board Type
CONFIG_DEFAULT_DEVICE_TREE="uarpiii_recovery"
CONFIG_DEFAULT_FDT_FILE="uarpiii_recovery.dtb"
CONFIG_IDENT_STRING="UARPIII Node"
CONFIG_SPL_DISPLAY_PRINT=y

# Hardware Type
CONFIG_ARM=y
CONFIG_SYS_L2_PL310=y
CONFIG_ARCH_SOCFPGA=y
CONFIG_SPL_FPGA=y
CONFIG_TARGET_SOCFPGA_UARPIII=y
CONFIG_SYS_NS16550_MEM32=y
CONFIG_DESIGNWARE_APB_TIMER=y

# No RAM
CONFIG_SPL_ALTERA_SDRAM=n

# Enable HPS bridge before loading image
CONFIG_SPL_SOCFPGA_ENABLE_BRIDGE=y

# Sizes
# SPL is located at the bottom of the on-chip RAM (up to 192kB available to SPL)
# We pad to 256kB as required by Arria 10 Boot ROM. Max boot memory length is 64kB
# as we start the recovery image at 0xFFE30000.
CONFIG_SPL_TEXT_BASE=0xFFE00000
CONFIG_SPL_PAD_TO=0x40000
CONFIG_SPL_STACK=0xffe28000
CONFIG_HAS_CUSTOM_SYS_INIT_SP_ADDR=y
CONFIG_CUSTOM_SYS_INIT_SP_ADDR=0xffe20000
CONFIG_HAS_CUSTOM_SPL_MALLOC_START=y
CONFIG_CUSTOM_SYS_SPL_MALLOC_ADDR=0xffe20000
CONFIG_SYS_SPL_MALLOC=y
CONFIG_SYS_SPL_MALLOC_SIZE=0x10000
CONFIG_SYS_BOOTM_LEN=0x10000
CONFIG_SYS_ICACHE_OFF=y
CONFIG_SYS_DCACHE_OFF=y

# We then load our custom bootloader to start 192kB into the on-chip RAM as we have no DDR.
# The custom bootloader (run after SPL) will then load our actual program image to the bottom
# of the RAM (the space used by the SPL freed up by that point).
CONFIG_TEXT_BASE=0xFFE30000
CONFIG_SYS_MONITOR_LEN=65536
# Env paramters for SD card for U-Boot proper. This isn't used, but needed to prevent compile issues
CONFIG_ENV_SIZE=0x2000
CONFIG_ENV_OFFSET=0x4400

# MMC
CONFIG_SYS_MMC_MAX_BLK_COUNT=256
CONFIG_MMC_DW=y
CONFIG_ENV_IS_IN_MMC=y
CONFIG_CMD_MMC=y
CONFIG_SPL_LEGACY_IMAGE_CRC_CHECK=y
CONFIG_DOS_PARTITION=y
CONFIG_SYS_MMCSD_RAW_MODE_U_BOOT_PARTITION_TYPE=0xDA

# Others
CONFIG_DM_GPIO=y
CONFIG_DWAPB_GPIO=y
CONFIG_OF_SPL_REMOVE_PROPS="interrupts interrupt-parent dmas dma-names clock-names"
CONFIG_SPL_DM_SEQ_ALIAS=y
CONFIG_SPL_DRIVERS_MISC=y
CONFIG_SPL_ENV_SUPPORT=y
CONFIG_SPL_FS_LOADER=y
CONFIG_SPL_NO_BSS_LIMIT=y
CONFIG_CMD_FPGA_LOADMK=y
CONFIG_CMD_GPIO=y
CONFIG_CMD_CACHE=y
CONFIG_CLOCKS=y
CONFIG_TIMESTAMP=y
CONFIG_DISPLAY_BOARDINFO_LATE=y
CONFIG_FIT=y
CONFIG_SPL_FIT=y
CONFIG_FS_LOADER=y
CONFIG_SPL_RAW_IMAGE_SUPPORT=y

# Peripherals
CONFIG_TIMER=y
CONFIG_SPL_TIMER=y
CONFIG_ETH_DESIGNWARE=y
CONFIG_SPL_RESET_SOCFPGA_KEEP_ENABLED=y
